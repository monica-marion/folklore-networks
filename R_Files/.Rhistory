install.packages('viridis')
install.packages('vegan')
# if for some reason the ichthyoliths package is NOT installed already, run the following code to install the package from GitHub:
library(devtools)
# if devtools isn't installed, run install.packages('devtools'), then load the library
install.packages('devtools')
install_github('esibert/ichthyoliths')
# You may need to set up the working directory for this script.
setwd('/Users/monicamarion/Desktop/Homework/I606/Star_Husband/R_Files')
### Morphology-- the codes for the stories
dat_toothmorph <- read.csv('StarHusbandCodes_4-27.csv', skip = 0, header = TRUE)
colnames(dat_toothmorph)[5] <- 'ID' #this is a little thing that we need to do to make the code run properly. It sets the ID column number
## set the weights for each trait
# for star husband tale, certain 'sub-features' are downweighted to .5
# their corresponding collumn has a lower number in this list:
weights <- c(1,1,1,.5,.5,1,1,1,1,1,.5,1,1,.5,.5,1,.5,.5,1,1,1,1,1)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/Homework/I606/Star_Husband/traitCSV")
install_github('esibert/ichthyoliths')
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/Homework/I606/Star_Husband/traitCSV")
##calculate the distances
#subset weights should be false if you're using the standard weights you already set above
#contTraits should be false unless you have numerical value traits
#morphCols is the columns in the morphology csv which have the number code data
toothdist <- distances_clust(morph = dat_toothmorph, traits = traitset, weights = weights, morphCols = c(6:28), subsetWeights = FALSE, contTraits = FALSE)
uninstall.packages('esibert/ichthyoliths')
library("ichthyoliths", lib.loc="/Library/Frameworks/R.framework/Versions/3.6/Resources/library")
install.packages(c("boot", "class", "devtools", "isoband", "KernSmooth", "lattice", "MASS", "nlme", "nnet", "pkgbuild", "purrr", "rex", "spatial", "survival", "tibble", "withr", "xfun", "xml2"))
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/Homework/I606/Star_Husband/traitCSV")
# if for some reason the ichthyoliths package is NOT installed already, run the following code to install the package from GitHub:
library(devtools)
# if devtools isn't installed, run install.packages('devtools'), then load the library
install.packages('devtools')
install.packages("devtools")
install_github('esibert/ichthyoliths')
# if for some reason the ichthyoliths package is NOT installed already, run the following code to install the package from GitHub:
library(devtools)
install_github('esibert/ichthyoliths')
install_github('esibert/ichthyoliths', force = TRUE)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/Homework/I606/Star_Husband/traitCSV")
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/Homework/I606/Star_Husband/traitCSV")
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-ichthyoliths::import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/Homework/I606/Star_Husband/traitCSV")
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/Homework/I606/Star_Husband/traitCSV")
##### Libraries (run this whole section every time, even if you've used the RData file) #####
library(ichthyoliths)
library(doParallel)
library(vegan)
library(viridis)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/Homework/I606/Star_Husband/traitCSV")
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
##calculate the distances
#subset weights should be false if you're using the standard weights you already set above
#contTraits should be false unless you have numerical value traits
#morphCols is the columns in the morphology csv which have the number code data
toothdist <- distances_clust(morph = dat_toothmorph, traits = traitset, weights = weights, morphCols = c(6:28), subsetWeights = FALSE, contTraits = FALSE)
warnings()
##calculate the distances
#subset weights should be false if you're using the standard weights you already set above
#contTraits should be false unless you have numerical value traits
#morphCols is the columns in the morphology csv which have the number code data
toothdist <- distances_clust(morph = dat_toothmorph, traits = traitset, weights = weights, morphCols = c(6:28), subsetWeights = FALSE, contTraits = FALSE)
# Troubleshooting - find the NAs...
df.na <- subset(toothdist, is.na(toothdist$dist.sum))
#list of teeth that broke the function (if any):
unique(df.na[,3])
View(traitset)
head (dat_toothmorph)
### Morphology-- the codes for the stories
dat_toothmorph <- read.csv('StarHusbandCodes_4-27.csv', skip = 0, header = TRUE)
colnames(dat_toothmorph)[5] <- 'ID' #this is a little thing that we need to do to make the code run properly. It sets the ID column number
## set the weights for each trait
# for star husband tale, certain 'sub-features' are downweighted to .5
# their corresponding collumn has a lower number in this list:
weights <- c(1,1,1,.5,.5,1,1,1,1,1,.5,1,1,.5,.5,1,.5,.5,1,1,1,1,1)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
# on my computer, the command is
setwd('/Users/monicamarion/Desktop/Homework/F512/R_Files')
### Morphology
dat_toothmorph <- read.csv('genrecodes_4-10.csv', skip = 1, header = TRUE)
colnames(dat_toothmorph)[4] <- 'ID' #this is a little thing that we need to do to make the code run properly
weights <- c(rep(1,17))
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/F512/traitCSV")
toothdist <- distances_clust(morph = dat_toothmorph, traits = traitset, weights = weights, morphCols = c(5:21), subsetWeights = FALSE, contTraits = FALSE)
# Troubleshooting - find the NAs...
df.na <- subset(toothdist, is.na(toothdist$dist.sum))
head(dat_toothmorph)
### Morphology-- the codes for the stories
dat_toothmorph <- read.csv('StarHusbandCodes_4-27.csv', skip = 0, header = TRUE)
colnames(dat_toothmorph)[5] <- 'ID' #this is a little thing that we need to do to make the code run properly. It sets the ID column number
## set the weights for each trait
# for star husband tale, certain 'sub-features' are downweighted to .5
# their corresponding collumn has a lower number in this list:
weights <- c(1,1,1,.5,.5,1,1,1,1,1,.5,1,1,.5,.5,1,.5,.5,1,1,1,1,1)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
##calculate the distances
#subset weights should be false if you're using the standard weights you already set above
#contTraits should be false unless you have numerical value traits
#morphCols is the columns in the morphology csv which have the number code data
toothdist <- distances_clust(morph = dat_toothmorph, traits = traitset, weights = weights, morphCols = c(6:28), subsetWeights = FALSE, contTraits = FALSE)
### Morphology-- the codes for the stories
dat_toothmorph <- read.csv('StarHusbandCodes_4-27.csv', skip = 0, header = TRUE)
# You may need to set up the working directory for this script.
setwd('/Users/monicamarion/Desktop/Homework/I606/Star_Husband/R_Files')
### Morphology-- the codes for the stories
dat_toothmorph <- read.csv('StarHusbandCodes_4-27.csv', skip = 0, header = TRUE)
colnames(dat_toothmorph)[5] <- 'ID' #this is a little thing that we need to do to make the code run properly. It sets the ID column number
## set the weights for each trait
# for star husband tale, certain 'sub-features' are downweighted to .5
# their corresponding collumn has a lower number in this list:
weights <- c(1,1,1,.5,.5,1,1,1,1,1,.5,1,1,.5,.5,1,.5,.5,1,1,1,1,1)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
##calculate the distances
#subset weights should be false if you're using the standard weights you already set above
#contTraits should be false unless you have numerical value traits
#morphCols is the columns in the morphology csv which have the number code data
toothdist <- distances_clust(morph = dat_toothmorph, traits = traitset, weights = weights, morphCols = c(6:28), subsetWeights = FALSE, contTraits = FALSE)
# Troubleshooting - find the NAs...
df.na <- subset(toothdist, is.na(toothdist$dist.sum))
head (toothdist)
# Once there are no more NA values, make the distance matrix object to calculate the morphospace
# make distmat
toothdistmat <- distmat(toothdist)
# check the distance matrix
head (toothdistmat)
#list of teeth that broke the function (if any):
unique(df.na[,3])
write.csv(toothdist, file = "star_husband_dist.csv")
# on my computer, the command is
setwd('/Users/monicamarion/Desktop/Homework/F512/R_Files')
### Morphology
dat_toothmorph <- read.csv('genrecodes_4-10.csv', skip = 1, header = TRUE)
colnames(dat_toothmorph)[4] <- 'ID' #this is a little thing that we need to do to make the code run properly
weights <- c(rep(1,17))
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/F512/traitCSV")
toothdist <- distances_clust(morph = dat_toothmorph, traits = traitset, weights = weights, morphCols = c(5:21), subsetWeights = FALSE, contTraits = FALSE)
# Troubleshooting - find the NAs...
df.na <- subset(toothdist, is.na(toothdist$dist.sum))
write.csv(toothdist, file = "genre_dist.csv")
?read.csv
# You may need to set up the working directory for this script.
setwd('/Users/monicamarion/Desktop/Homework/I606/Star_Husband/R_Files')
### Morphology-- the codes for the stories
dat_toothmorph <- read.csv('StarHusbandCodes_4-27.csv', skip = 0, header = TRUE)
colnames(dat_toothmorph)[5] <- 'ID' #this is a little thing that we need to do to make the code run properly. It sets the ID column number
## set the weights for each trait
# for star husband tale, certain 'sub-features' are downweighted to .5
# their corresponding collumn has a lower number in this list:
weights <- c(1,1,1,.5,.5,1,1,1,1,1,.5,1,1,.5,.5,1,.5,.5,1,1,1,1,1)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
View(traitset)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
View(traitset)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
View(traitset)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
View(traitset)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
View(traitset)
##calculate the distances
#subset weights should be false if you're using the standard weights you already set above
#contTraits should be false unless you have numerical value traits
#morphCols is the columns in the morphology csv which have the number code data
toothdist <- distances_clust(morph = dat_toothmorph, traits = traitset, weights = weights, morphCols = c(6:28), subsetWeights = FALSE, contTraits = FALSE)
# Troubleshooting - find the NAs...
df.na <- subset(toothdist, is.na(toothdist$dist.sum))
#list of teeth that broke the function (if any):
unique(df.na[,3])
write.csv(toothdist, file = "star_husband_dist.csv")
### Morphology-- the codes for the stories
dat_toothmorph <- read.csv('StarHusbandCodes_4-27_2.csv', skip = 0, header = TRUE)
colnames(dat_toothmorph)[5] <- 'ID' #this is a little thing that we need to do to make the code run properly. It sets the ID column number
## set the weights for each trait
# for star husband tale, certain 'sub-features' are downweighted to .5
# their corresponding collumn has a lower number in this list:
weights <- c(1,1,1,.5,.5,1,1,1,1,1,.5,1,1,.5,.5,1,.5,.5,1,1,1,1,1)
## import the trait distance csvs
# they were created on drive but need to be named properly and saved in a good directory
# should be one for every trait, need to be named 'TraitX.csv'
traitset<-import_traits_csvs(csvpath= "/Users/monicamarion/Desktop/Homework/I606/Star_Husband/traitCSV")
##calculate the distances
#subset weights should be false if you're using the standard weights you already set above
#contTraits should be false unless you have numerical value traits
#morphCols is the columns in the morphology csv which have the number code data
toothdist <- distances_clust(morph = dat_toothmorph, traits = traitset, weights = weights, morphCols = c(6:28), subsetWeights = FALSE, contTraits = FALSE)
# Troubleshooting - find the NAs...
df.na <- subset(toothdist, is.na(toothdist$dist.sum))
#list of teeth that broke the function (if any):
unique(df.na[,3])
write.csv(toothdist, file = "star_husband_dist.csv")
View(traitset)
dat_toothmorph[4]
dat_toothmorph[,4]
dat_toothmorph[4,]
#list of teeth that broke the function (if any):
unique(df.na[,3])
dat_toothmorph[38,]
# Once there are no more NA values, make the distance matrix object to calculate the morphospace
# make distmat
toothdistmat <- distmat(toothdist)
# check the distance matrix
head (toothdistmat)
# write the distance matrix to csv
write.csv(toothdistmat, file = "star_husband_distmat.csv")
